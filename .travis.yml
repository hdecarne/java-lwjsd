language: java

jdk:
  - oraclejdk11

os:
  - linux
  - osx

dist: trusty
osx_image: xcode9.3

env:
  JAVA_OPTS="-Xmx2g -Dfile.encoding=UTF-8"

addons:
  sonarcloud:
    organization: "hdecarne-github"

git:
  depth: false  

script:
  - ./gradlew --stacktrace clean build

after_success:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ./gradlew --stacktrace artifactoryPublish sonarqube checkDependencyVersions; fi

notifications:
  slack:
    room:
      secure: SYF+o0xdlwF9cFewHMCr4zCOxjvrxcbGeVd8x9snD8bQj/pLeP5b1T+0GWiiCaicJ6B8QQhQ4KKwUUBgEiyHCmJnNkSOx9FMl8b9cBstSiwhKhO5DgRobiVRyF4maaC5P+wLuOllHX9yf8o30we3BbThEq1OAwxOedio93KqqsExKqU3vjY4rogwfQ2l+sh/Bxv3gghVSBEDA23+o/18y+yyUpKgrtYHQjC1/Q8XK07cWscIpQGxPYAr04MfZcnmVYy+a08s50+jKhF6PGsqj5omccgRHOTs1uUBZYcEwzhaINj4lsHco3Dm4KyLBy21H6QRRsDP2xA1VqiR8GOC4nfrwdHXCNNgT+QBREoOKeOQ3KcDCqDvjqDWxJAeseWVMY2+9zR2XifLRYFOQckqEZi49IWGZ9RsP3TwCRI/P4+5YOV9b5P9ScO09bFf47yGGNelAsvRLk6BXN8HJWKk2fAsfBRchGX64rtps6RghZu0Td01tlXINo9BZg1TVTtA71CGFns4mev/8isRfg2VWhNHnFJi7H8ZaoREqiAR9mL3LKTLMBeT8BYd4ZnBCqVw7wkWmHmZNSha8/o8Yeuem7/9GcBaTVYof3yRWs1qTdORLV6UmqoEFHi2cJuXUHZXUik9vrwzT7czXcnLtFK32NbltpSY2R5+wxnUSivQGWE=

# See https://docs.travis-ci.com/user/languages/java/#caching
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
